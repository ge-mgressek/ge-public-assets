(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))R(C);new MutationObserver(C=>{for(const S of C)if(S.type==="childList")for(const F of S.addedNodes)F.tagName==="LINK"&&F.rel==="modulepreload"&&R(F)}).observe(document,{childList:!0,subtree:!0});function O(C){const S={};return C.integrity&&(S.integrity=C.integrity),C.referrerPolicy&&(S.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?S.credentials="include":C.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function R(C){if(C.ep)return;C.ep=!0;const S=O(C);fetch(C.href,S)}})();document.addEventListener("DOMContentLoaded",()=>{const g=document.getElementById("co2-animation-canvas");if(g){let N=function(){const a=g.parentElement;g.width=a.offsetWidth,g.height=a.offsetHeight;const i=g.height/2+30;c.x=g.width/2-c.width/2,c.y=i,b.radius=Math.min(g.width,g.height)*.1,b.x=g.width*.25,b.y=c.y+c.height/2,r.size=b.radius*2,r.x=g.width*.75,r.y=b.y-r.size/2,k()},k=function(){e=[];for(let a=0;a<o;a++)e.push(new y)},U=function(a){r.lastStateChange||(r.lastStateChange=a);const i=a-r.lastStateChange;switch(r.state){case"DRAWING_HOUSE":r.alpha=1,r.drawProgress=Math.min(1,i/M.DRAWING_HOUSE),i>=M.DRAWING_HOUSE&&(r.state="SHOWING_HOUSE",r.lastStateChange=a);break;case"SHOWING_HOUSE":i>=M.SHOWING_HOUSE&&(r.state="SHOWING_RECYCLE",r.lastStateChange=a);break;case"SHOWING_RECYCLE":i>=M.SHOWING_RECYCLE&&(r.state="FADING_OUT",r.lastStateChange=a);break;case"FADING_OUT":r.alpha=1-i/M.FADING_OUT,r.alpha<=0&&(r.alpha=0,r.state="DRAWING_HOUSE",r.lastStateChange=a,r.drawProgress=0);break}},Y=function(){switch(x){case"FADING_IN":I=Math.min(1,I+.02),I>=1&&(x="SHOWING",setTimeout(()=>{x="FADING_OUT"},2e3));break;case"FADING_OUT":I=Math.max(0,I-.02),I<=0&&(x="FADING_IN",f=(f+1)%G.length);break}},W=function(a){if(!P)return;const i=r.x,n=r.y+r.size/2;t.beginPath(),t.moveTo(c.x+c.width/2,c.y+c.height/2),t.lineTo(b.x,b.y),t.moveTo(c.x+c.width/2,c.y+c.height/2),t.lineTo(i,n),t.strokeStyle="rgba(212, 175, 55, 0.6)",t.lineWidth=3,t.stroke();const h=(Math.sin(Date.now()/650)+1)/2,p=20+h*30,d=1+h*.15,v=c.width*d,D=c.height*d,A=c.x-(v-c.width)/2,T=c.y-(D-c.height)/2;t.shadowColor="rgba(132, 169, 140, 1)",t.shadowBlur=p,t.drawImage(m,A,T,v,D),t.shadowBlur=0,t.save(),t.translate(b.x,b.y),t.rotate(b.rotation),t.drawImage(l,-b.radius,-b.radius,b.radius*2,b.radius*2),t.restore(),b.rotation-=.002,Y(),t.font=`bold ${Math.max(10,g.width*.012)}px Inter, sans-serif`,t.textAlign="center",t.fillStyle=`rgba(255, 255, 255, ${I})`,t.shadowColor="rgba(0,0,0,0.8)",t.shadowBlur=4,t.fillText(G[f],b.x,b.y+b.radius+25),t.shadowBlur=0,U(a),t.save(),t.globalAlpha=r.alpha,t.translate(r.x,r.y),t.scale(r.size/100,r.size/100),t.strokeStyle="white",t.lineWidth=3,t.setLineDash([400,400]),t.lineDashOffset=400-r.drawProgress*400,t.stroke(L),t.setLineDash([]),t.font=`bold ${Math.max(10,g.width*.012)}px Inter, sans-serif`,t.textAlign="center",t.fillStyle="white",t.shadowColor="rgba(0,0,0,0.8)",t.shadowBlur=4;let $=0;r.state==="DRAWING_HOUSE"&&r.drawProgress>.5?$=(r.drawProgress-.5)*2:(r.state==="SHOWING_HOUSE"||r.state==="SHOWING_RECYCLE")&&($=1),t.globalAlpha=r.alpha*$,r.state==="SHOWING_RECYCLE"?(t.drawImage(w,55/2,38/2+5,45,45),t.fillText("Local Recyclability = Permanence",50,115)):t.fillText("CO2 locked for 100+ years",50,115),t.restore()},s=function(a){u=requestAnimationFrame(s),r.lastStateChange||(r.lastStateChange=a),t.clearRect(0,0,g.width,g.height),e.forEach(i=>{i.update(),i.draw()}),W(a)};var Ce=N,Ie=k,Ee=U,Se=Y,Ae=W,Pe=s;const t=g.getContext("2d");let e=[];const o=300;let u;const m=new Image;m.src="/assets/images/GE-CPU.png";const l=new Image;l.src="/assets/images/GE-SDG-Wheel.png";const w=new Image;w.src="/assets/images/Recycle.png";const L=new Path2D("M4.39999 37.8L50.4 4.79999L96.4 37.8V83H4.39999V37.8Z");let P=!1;Promise.all([new Promise(a=>{m.onload=()=>a()}),new Promise(a=>{l.onload=()=>a()}),new Promise(a=>{w.onload=()=>a()})]).then(()=>{P=!0,u||(N(),s())});const c={x:0,y:0,width:120,height:120},b={x:0,y:0,radius:0,rotation:0},r={x:0,y:0,size:0,state:"DRAWING_HOUSE",alpha:0,drawProgress:0,lastStateChange:0},G=["Reduce Poverty","Clean Air & Oceans","Good Incomes"];let f=0,I=0,x="FADING_IN";class y{constructor(){this.reset()}reset(){const i=Math.floor(Math.random()*4);i===0?(this.x=Math.random()*g.width,this.y=-10):i===1?(this.x=g.width+10,this.y=Math.random()*g.height):i===2?(this.x=Math.random()*g.width,this.y=g.height+10):(this.x=-10,this.y=Math.random()*g.height),this.radius=Math.random()*2+1,this.opacity=Math.random()*.5+.2,this.speedX=0,this.speedY=0,this.vx=(Math.random()-.5)*.2,this.vy=(Math.random()-.5)*.2}draw(){t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.fillStyle=`rgba(255, 255, 255, ${this.opacity})`,t.fill()}update(){const i=c.x+c.width/2-this.x,n=c.y+c.height/2-this.y,h=Math.sqrt(i*i+n*n);this.speedX+=i/h*.05,this.speedY+=n/h*.05,this.x+=this.speedX+this.vx,this.y+=this.speedY,this.speedX*=.98,this.speedY*=.98,Math.sqrt(Math.pow(this.x-(c.x+c.width/2),2)+Math.pow(this.y-(c.y+c.height/2),2))<c.width/2&&this.reset()}}const M={DRAWING_HOUSE:3e3,SHOWING_HOUSE:2500,SHOWING_RECYCLE:2500,FADING_OUT:1e3};window.addEventListener("resize",()=>{u&&cancelAnimationFrame(u),N(),s()})}let E=0;O();function O(){let t,e=document.getElementsByClassName("slide");if(e.length!==0){for(t=0;t<e.length;t++)e[t].style.display="none";E++,E>e.length&&(E=1),e[E-1].style.display="block",setTimeout(O,4e3)}}const R={id:"povertyLine",afterDraw:t=>{if(t.config.type==="bar"&&t.options.indexAxis==="y"){const o=t.ctx,u=t.scales.y,m=t.scales.x;o.save(),o.beginPath(),o.moveTo(m.getPixelForValue(1332),u.top),o.lineTo(m.getPixelForValue(1332),u.bottom),o.lineWidth=2,o.strokeStyle="#ef4444",o.setLineDash([6,6]),o.stroke(),o.restore(),o.save(),o.fillStyle="#ef4444",o.textAlign="center",o.font="12px Inter, sans-serif",o.fillText("Poverty Line",m.getPixelForValue(1332),t.chartArea.bottom+35),o.restore()}}};Chart.register(R);const C={people:{type:"bar",data:{labels:["Before Globe-Eco","After Globe-Eco"],datasets:[{label:"Avg. Annual Farmer Income (USD)",data:[500,1750],backgroundColor:["#FCA5A5","#84A98C"],borderColor:["#EF4444","#365314"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{color:"#374151"},max:2e3},y:{ticks:{color:"#374151"}}},layout:{padding:{bottom:40}},plugins:{legend:{display:!1},title:{display:!0,text:"Farmer Income Increase",color:"#374151",font:{size:16}}},animation:{duration:1500,easing:"easeInOutQuart"}}},lca:{type:"bar",data:{labels:["Net Removal"],datasets:[{label:"kg CO₂eq per m³",data:[-1643],backgroundColor:["#365314"]}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.parsed.x} kg CO₂eq (Net Removal)`}}},scales:{x:{ticks:{color:"#374151"}},y:{ticks:{color:"#374151"}}}}},growth:{type:"line",data:{labels:["Y0","Y1","Y2","Y3","Y4","Y5","Y6","Y7"],datasets:[{label:"Total Units (Cumulative)",data:[3,15,75,300,1200,4e3,7e3,1e4],borderColor:"#365314",backgroundColor:"rgba(54, 83, 20, 0.1)",fill:!0,yAxisID:"y",tension:.4},{label:"Annual CO2e Removed (Million Tons)",data:[.072,.36,1.8,7.2,28.8,440,770,1100],borderColor:"#D4AF37",backgroundColor:"rgba(212, 175, 55, 0.1)",fill:!0,yAxisID:"y1",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"bottom",labels:{color:"#374151"}},tooltip:{callbacks:{label:function(t){let e=t.dataset.label||"";return e&&(e+=": "),t.parsed.y!==null&&(e+=new Intl.NumberFormat("en-US").format(t.parsed.y),t.dataset.yAxisID==="y1"&&(e+=" M tons")),e}}}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Total Units (Cumulative)",color:"#365314"},ticks:{color:"#365314"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Annual CO2e Removed (M tons)",color:"#D4AF37"},grid:{drawOnChartArea:!1},ticks:{color:"#D4AF37"}},x:{ticks:{color:"#374151"}}}}}};let S={};const F=(t,e)=>{const o=document.getElementById(t).getContext("2d");S[t]&&S[t].destroy(),S[t]=new Chart(o,e)},ae=[{id:1,name:"No Poverty",color:"#E5243B",description:"Provides a +250% income increase to farmers, lifting families from <$2/day."},{id:2,name:"Zero Hunger",color:"#DDA63A",description:"Promotes sustainable agriculture and improves food security through intercropping."},{id:3,name:"Good Health and Well-being",color:"#4C9F38",description:"Reduces air pollution by eliminating biomass burning, improving respiratory health."},{id:4,name:"Quality Education",color:"#C5192D",description:"Provides materials for building schools and increased family income supports education."},{id:5,name:"Gender Equality",color:"#FF3A21",description:"Empowers women in rural communities with new economic opportunities."},{id:6,name:"Clean Water and Sanitation",color:"#26BDE2",description:"Protects watersheds by reducing deforestation and land degradation."},{id:7,name:"Affordable and Clean Energy",color:"#FCC30B",description:"CPUs are self-powered by biomass gasification, providing off-grid energy."},{id:8,name:"Decent Work and Economic Growth",color:"#A21942",description:"Creates thousands of high-tech jobs and stimulates local economies."},{id:9,name:"Industry, Innovation and Infrastructure",color:"#FD6925",description:"Builds resilient, sustainable infrastructure with carbon-negative materials."},{id:10,name:"Reduced Inequality",color:"#DD1367",description:"Reduces inequality by providing wealth creation opportunities in rural areas."},{id:11,name:"Sustainable Cities and Communities",color:"#FD9D24",description:"Supplies sustainable, affordable building materials for housing and public works."},{id:12,name:"Responsible Consumption and Production",color:"#BF8B2E",description:"Creates a circular economy model by upcycling agricultural waste."},{id:13,name:"Climate Action",color:"#3F7E44",description:"Delivers gigaton-scale, permanent carbon dioxide removal."},{id:14,name:"Life Below Water",color:"#0A97D9",description:"Stay tuned: Diverts thousands of tons of plastic waste, preventing it from reaching oceans."},{id:15,name:"Life on Land",color:"#56C02B",description:"Reduces demand for logging, protecting forests and biodiversity."},{id:16,name:"Peace, Justice and Strong Institutions",color:"#00689D",description:"Promotes fair trade practices and economic stability in developing regions."},{id:17,name:"Partnerships for the Goals",color:"#19486A",description:"Forms public-private partnerships to mobilize investment for the SDGs."}],X=document.getElementById("sdg-grid"),_=document.getElementById("sdg-tooltip");ae.forEach(t=>{const e=document.createElement("div");e.className="sdg-grid-item rounded-md p-2 cursor-pointer";const o=document.createElement("img");o.src=`/assets/images/E-WEB-Goal-${String(t.id).padStart(2,"0")}.png`,o.alt=`SDG Goal ${t.id}`,o.className="w-full h-auto",e.appendChild(o),e.addEventListener("mouseover",()=>{_.textContent=t.description}),e.addEventListener("mouseout",()=>{_.textContent="Hover over a goal to see our contribution."}),X.appendChild(e)});const H=document.createElement("div");H.className="sdg-grid-item rounded-md p-2 cursor-pointer";const q=document.createElement("img");q.src="/assets/images/GE-Logo-Tile.png",q.alt="Globe-Eco Logo",q.className="w-full h-auto",H.appendChild(q),H.addEventListener("mouseover",()=>{_.textContent="People, Planet, Prosperity"}),H.addEventListener("mouseout",()=>{_.textContent="Hover over a goal to see our contribution."}),X.appendChild(H);const ie=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},{threshold:.1});document.querySelectorAll(".section-fade-in").forEach(t=>{ie.observe(t)});const se=new IntersectionObserver((t,e)=>{t.forEach(o=>{if(o.isIntersecting){const u=o.target.id;let m;u==="peopleChart"?m="people":u==="lcaChart"?m="lca":u==="growthChart"&&(m="growth");const l=C[m];l&&F(u,l),e.unobserve(o.target)}})},{threshold:.5});document.querySelectorAll(".chart-container canvas").forEach(t=>{se.observe(t)});const ne=document.getElementById("sdg-grid");new IntersectionObserver((t,e)=>{t.forEach(o=>{o.isIntersecting&&(o.target.querySelectorAll(".sdg-grid-item").forEach((m,l)=>{setTimeout(()=>{m.classList.add("sdg-item-animate"),setTimeout(()=>{m.classList.remove("sdg-item-animate")},500)},l*100)}),e.unobserve(o.target))})},{threshold:.5}).observe(ne);const V=document.getElementById("unmute-button"),z=document.getElementById("buko-joe-video"),j=document.getElementById("mute-icon"),Z=document.getElementById("unmute-icon");V&&z&&j&&Z&&V.addEventListener("click",()=>{z.muted=!z.muted,j.classList.toggle("hidden"),Z.classList.toggle("hidden")});const re=document.getElementById("mobile-menu-button"),J=document.getElementById("mobile-menu");re.addEventListener("click",()=>{J.classList.toggle("hidden")}),document.querySelectorAll("#mobile-menu a").forEach(t=>{t.addEventListener("click",()=>{J.classList.add("hidden")})}),document.getElementById("main-header");const le=document.querySelectorAll(".nav-link"),ce=document.querySelectorAll("main section");window.addEventListener("scroll",()=>{let t="";ce.forEach(e=>{const o=e.offsetTop;pageYOffset>=o-80&&(t=e.getAttribute("id"))}),le.forEach(e=>{e.classList.remove("active"),e.getAttribute("href").substring(1)===t&&e.classList.add("active")})});const de=()=>{const t=document.getElementById("particle-ring-v1");if(!t)return;function e(){t.innerHTML="";const o=12,u=50;for(let m=0;m<o;m++){const l=m/o*360,w=document.createElement("div");w.className="co2-particle-v1",w.textContent="CO₂";const L=u+u*Math.cos(l*Math.PI/180),P=u+u*Math.sin(l*Math.PI/180);w.style.left=`${L}%`,w.style.top=`${P}%`,t.appendChild(w)}}e()},ue=()=>{const t=document.getElementById("co2-particle-container-v2");if(!t)return;const e=document.getElementById("path-house-base"),o=document.getElementById("path-house-roof");let u,m,l=[],w;function L(f){if(!f)return;const I=f.getTotalLength();f.style.strokeDasharray=I,f.style.strokeDashoffset=I,f.style.opacity="1",f.classList.remove("draw-animation")}function P(){L(e),L(o),e.offsetWidth,e.style.animationDuration="2s",e.classList.add("draw-animation"),setTimeout(()=>{o.style.animationDuration="1.5s",o.classList.add("draw-animation")},2e3),u=setTimeout(c,6500)}function c(){e.style.opacity="0",o.style.opacity="0",u=setTimeout(P,2e3)}function b(){const f={};f.element=document.createElement("div"),f.element.className="co2-particle-v2",f.element.textContent="CO₂",f.startTime=Date.now(),f.duration=2500,f.p0={x:80,y:-10},f.p1={x:80,y:200},f.p2={x:160,y:300},f.p3={x:240,y:260},l.push(f),t.appendChild(f.element)}function r(){const f=Date.now();for(let I=l.length-1;I>=0;I--){const x=l[I];let y=(f-x.startTime)/x.duration;if(y>=1){x.element.remove(),l.splice(I,1);continue}const k=Math.pow(1-y,3)*x.p0.x+3*Math.pow(1-y,2)*y*x.p1.x+3*(1-y)*y*y*x.p2.x+y*y*y*x.p3.x,M=Math.pow(1-y,3)*x.p0.y+3*Math.pow(1-y,2)*y*x.p1.y+3*(1-y)*y*y*x.p2.y+y*y*y*x.p3.y;x.element.style.transform=`translate(${k}px, ${M}px)`}w=requestAnimationFrame(r)}function G(){clearTimeout(u),clearInterval(m),cancelAnimationFrame(w),t.innerHTML="",l=[],P(),m=setInterval(b,500),r()}G()},he=()=>{const t=document.getElementById("coreAnimationCanvas");if(!t)return;const e=t.getContext("2d");let o={},u=[],m=!1;const l={frond:new Image,tree:new Image,sdg:new Image,cpu:new Image};let w=0;const L=Object.keys(l).length;function P(){w++,w===L&&!m&&(m=!0,c(),W())}l.frond.src="/assets/images/GE-PalmFrond.png",l.tree.src="/assets/images/CoconutTree.png",l.sdg.src="/assets/images/GE-SDG-Wheel.png",l.cpu.src="/assets/images/GE-CPU.png",Object.values(l).forEach(s=>{s.onload=P,s.onerror=()=>console.error(`Failed to load image: ${s.src}`)});function c(){const s=t.parentElement,a=window.devicePixelRatio||1;t.width=s.clientWidth*a,t.height=s.clientHeight*a,e.scale(a,a);const i=t.clientWidth,n=t.clientHeight;o={tree:{x:i*.15,y:n*.7,width:i*.12,height:i*.12*(l.tree.height/l.tree.width)},tree2:{x:i*.08,y:n*.7,width:i*.1,height:i*.1*(l.tree.height/l.tree.width)},tree3:{x:i*.03,y:n*.7,width:i*.08,height:i*.08*(l.tree.height/l.tree.width)},conveyor:{y:n*.7,startX:i*.22,endX:i*.45},fronds:[],core:{x:i*.5,y:n*.7,radius:i*.07,glow:1,glowSpeed:.05,pulsing:!1,pulseDuration:100,pulseTimer:0},carbonCounter:{value:0,increment:.125},sdg:{x:i*.5,y:n*.25,size:i*.08*1.5,rotation:0},house:{x:i*.8,y:n*.7,width:i*.1,height:i*.075,buildProgress:0,maxProgress:100,state:"ready",completionTime:0},captions:{texts:["CO2 infused plantation waste","Funding plantation CO2 productivity","Economic Engine funds CO2-benefits","CO2 durably stored"],positions:[{x:i*.15,y:n*.85},{x:i*.15,y:n*.15},{x:i*.85,y:n*.15},{x:i*.85,y:n*.85}],currentIndex:0,alpha:0,state:"FADING_IN",lastChange:Date.now(),showDuration:3e3,fadeDuration:500}},b()}function b(){const s=t.clientWidth,a=3,i=s*.15;o.fronds=[];for(let n=0;n<a;n++)o.fronds.push({id:n,x:o.conveyor.startX-(a-n)*i,y:t.clientHeight*.7-10,width:s*.1,height:s*.1*(l.frond.height/l.frond.width),speed:2,co2Particle:{offsetX:(Math.random()*.4+.3)*(s*.1),offsetY:(Math.random()-.5)*(s*.1*(l.frond.height/l.tree.width))*.5,radius:s*.008,opacity:1}})}function r(s,a,i){let n,h,p,d,v,D,A;i==="carbonRay"?(n=o.house.x,h=o.core.y,p="rgba(150, 150, 150, 0.5)",d=80,A=Math.random()*2+1,v=(n-s)/d,D=(h-a)/d):i==="value"?(n=o.sdg.x,h=o.sdg.y,p=`rgba(252, 211, 77, ${Math.random()*.5+.5})`,d=120,A=Math.random()*2+1,v=(n-s)/d,D=(h-a)/d):i==="rejuvenation"&&(n=o.tree.x,h=o.tree.y-o.tree.height/2,p=`rgba(74, 222, 128, ${Math.random()*.5+.5})`,d=120,A=Math.random()*2.5+1.5,v=(n-s)/d,D=(h-a)/d),v!==void 0&&u.push({x:s,y:a,vx:v,vy:D,radius:A,color:p,type:i,life:d})}function G(){if(!o)return;const{house:s,sdg:a,tree:i,tree2:n,tree3:h}=o;e.save(),e.translate(h.x,0),e.scale(-1,1),e.drawImage(l.tree,-h.width/2,h.y-h.height,h.width,h.height),e.restore(),e.save(),e.translate(n.x,0),e.scale(-1,1),e.drawImage(l.tree,-n.width/2,n.y-n.height,n.width,n.height),e.restore(),e.save(),e.translate(i.x,0),e.scale(-1,1),e.drawImage(l.tree,-i.width/2,i.y-i.height,i.width,i.height),e.restore(),e.save(),e.translate(a.x,a.y),e.rotate(a.rotation),e.drawImage(l.sdg,-a.size/2,-a.size/2,a.size,a.size),e.restore()}function f(){if(!o||!o.conveyor)return;const{y:s,startX:a,endX:i}=o.conveyor;e.strokeStyle="#475569",e.lineWidth=2,e.beginPath(),e.moveTo(a,s),e.lineTo(i,s),e.stroke()}function I(){!o||!o.fronds||o.fronds.forEach(s=>{e.drawImage(l.frond,s.x,s.y-s.height,s.width,s.height);const a=s.co2Particle;if(a&&a.opacity>0){e.globalAlpha=a.opacity;const i=s.x+a.offsetX,n=s.y-s.height/2+a.offsetY;e.fillStyle="rgba(203, 213, 225, 1)",e.beginPath(),e.arc(i,n,a.radius,0,Math.PI*2),e.fill(),e.fillStyle="black",e.font=`bold ${a.radius*1.2}px Inter`,e.textAlign="center",e.textBaseline="middle",e.fillText("C",i,n),e.globalAlpha=1}})}function x(){if(!o||!o.core)return;const{x:s,y:a,radius:i,glow:n}=o.core,h=i*1.2*n,p=e.createRadialGradient(s,a,i*.7,s,a,h);p.addColorStop(0,"rgba(56, 189, 248, 0.5)"),p.addColorStop(1,"rgba(56, 189, 248, 0)"),e.fillStyle=p,e.beginPath(),e.arc(s,a,h,0,Math.PI*2),e.fill();const d=e.createRadialGradient(s,a,0,s,a,i);d.addColorStop(0,"rgba(207, 250, 254, 1)"),d.addColorStop(.7,"rgba(56, 189, 248, 1)"),d.addColorStop(1,"rgba(14, 116, 144, 1)"),e.fillStyle=d,e.beginPath(),e.arc(s,a,i,0,Math.PI*2),e.fill();const v=i*1.2;e.drawImage(l.cpu,s-v/2,a-v/2,v,v)}function N(){if(!o||!o.core)return;const{x:s,y:a}=o.core;e.fillStyle="white",e.font=`bold ${t.clientWidth*.015}px Inter`,e.textAlign="center",e.fillText(`Carbon Dioxide: ${Math.floor(o.carbonCounter.value)} T`,s,a+o.core.radius+25)}function y(){const s=o.sdg;u.forEach((a,i)=>{a.x+=a.vx,a.y+=a.vy,a.life--;let n=a.life<=0;if(a.type==="value"){const h=a.x-s.x,p=a.y-s.y;Math.sqrt(h*h+p*p)<s.size/2&&(n=!0)}else a.type==="carbonRay"&&a.x>=o.house.x&&(n=!0);n?(a.type==="carbonRay"&&o.house.buildProgress<o.house.maxProgress&&o.house.state==="building"&&(o.house.buildProgress+=2,o.house.buildProgress>=o.house.maxProgress&&(o.house.state="completed",o.house.completionTime=Date.now())),u.splice(i,1)):(e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.fillStyle=a.color,e.fill())})}function k(){if(!o||!o.house)return;const{x:s,y:a,width:i,height:n,buildProgress:h,state:p}=o.house;if(e.strokeStyle="#64748b",e.lineWidth=2,h>0||p==="completed"){const d=Math.min(h,100);if(d>0){e.fillStyle="#94a3b8";const A=n*.1;e.fillRect(s,a-A,i,A),e.strokeRect(s,a-A,i,A)}const v=Math.max(0,Math.min(1,(d-10)/50));if(v>0){const T=n*.375*v;e.fillStyle="#d1d5db",e.fillRect(s,a-n*.1-T,i,T),e.strokeRect(s,a-n*.1-T,i,T)}const D=Math.max(0,(d-60)/40);D>0&&(e.fillStyle="#4b5563",e.globalAlpha=D,e.beginPath(),e.moveTo(s-5,a-n*.475),e.lineTo(s+i/2,a-n*.75),e.lineTo(s+i+5,a-n*.475),e.closePath(),e.fill(),e.stroke(),e.globalAlpha=1)}}function M(s){if(!o||!o.captions)return;const{captions:a}=o,{state:i,fadeDuration:n,showDuration:h}=a,p=s-a.lastChange;switch(i){case"FADING_IN":a.alpha=Math.min(1,a.alpha+p/n),a.alpha>=1&&(a.alpha=1,a.state="SHOWING",a.lastChange=s);break;case"SHOWING":p>=h&&(a.state="FADING_OUT",a.lastChange=s);break;case"FADING_OUT":a.alpha=Math.max(0,a.alpha-p/n),a.alpha<=0&&(a.alpha=0,a.state="FADING_IN",a.currentIndex=(a.currentIndex-1+a.texts.length)%a.texts.length,a.lastChange=s);break}}function U(){if(!o||!o.captions)return;const{captions:s}=o,{texts:a,positions:i,currentIndex:n,alpha:h}=s,p=i[n];e.save(),e.globalAlpha=h,e.fillStyle="rgba(255, 255, 255, 0.8)",e.font=`bold ${t.clientWidth*.015}px Inter`,e.textAlign="center",e.fillText(a[n],p.x,p.y),e.restore()}function Y(){if(!o||!o.core||!o.fronds||!o.house||!o.sdg)return;const{core:s,fronds:a,house:i,sdg:n}=o,p=t.clientWidth*.15*a.length;n.rotation-=.002,a.forEach(d=>{const v=d.x;d.x+=d.speed;const D=s.x-s.radius-(d.x+d.width*.8);d.co2Particle&&(d.co2Particle.opacity=Math.max(0,D/50));const A=s.x-s.radius*2,T=v<A&&d.x>=A;d.x>s.x-s.radius&&(d.x-=p,i.state==="ready"&&(i.state="building"),d.co2Particle&&(d.co2Particle.opacity=1)),T&&(s.pulsing=!0,s.pulseTimer=s.pulseDuration,s.glowSpeed=Math.abs(s.glowSpeed))}),s.pulsing?(s.glow+=s.glowSpeed,s.glow>=1.8?s.glowSpeed=-.08:s.glow<=1&&(s.glowSpeed=.06),s.pulseTimer>0?(s.pulseTimer--,o.carbonCounter.value+=o.carbonCounter.increment):(s.pulsing=!1,s.glow=Math.max(1,s.glow-.05))):s.glow>1?s.glow=Math.max(1,s.glow-.03):s.glow=1,Math.random()>.7&&r(s.x,s.y,"carbonRay"),i.state==="building"&&i.buildProgress>0&&i.buildProgress<i.maxProgress&&Math.random()>.8&&r(i.x+i.width/2,i.y-i.height/2,"value"),Math.random()>.95&&r(n.x,n.y,"rejuvenation"),i.state==="completed"&&Date.now()-i.completionTime>4e3&&(i.buildProgress=0,i.state="ready",i.completionTime=0),M(Date.now())}function W(){requestAnimationFrame(W),e.clearRect(0,0,t.clientWidth,t.clientHeight),G(),f(),x(),N(),I(),k(),y(),U(),Y()}window.addEventListener("resize",()=>{m&&c()})};de(),ue(),he();const K=document.getElementById("contact-grid"),me=document.querySelectorAll(".modal"),ge=document.querySelectorAll('.modal button[class*="absolute"]');let Q="";function fe(t,e){const o=document.getElementById(t);o&&(o.classList.remove("hidden"),o.classList.add("visible"),Q=e)}function ee(t){t.classList.add("hidden"),t.classList.remove("visible");const e=t.querySelector("form");if(e&&(e.reset(),te(e),window.turnstile)){const o=e.querySelector(".cf-turnstile");o&&turnstile.reset(o)}}K&&K.addEventListener("click",t=>{const e=t.target.closest(".card");if(e){const o=e.dataset.modal,u=e.dataset.email;o&&u&&fe(o,u)}}),ge.forEach(t=>{t.addEventListener("click",()=>{ee(t.closest(".modal"))})}),me.forEach(t=>{t.addEventListener("click",o=>{o.target===t&&ee(t)});const e=t.querySelector("form");e&&e.addEventListener("submit",o=>ye(o,e))});function B(t,e){const o=t.querySelector(".error-message");o.textContent=e}function te(t){const e=t.querySelector(".error-message");e.textContent=""}function pe(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}async function ye(t,e){t.preventDefault(),te(e);const o=e.querySelector('button[type="submit"]');o.disabled=!0,o.textContent="Submitting...";const u=new FormData(e),m=u.get("name"),l=u.get("email"),w=u.get("message"),L=u.get("cf-turnstile-response");if(!m||!l||!w){B(e,"Please fill out all required fields."),o.disabled=!1,o.textContent="Submit";return}if(!pe(l)){B(e,"Please enter a valid email address."),o.disabled=!1,o.textContent="Submit";return}if(!L){B(e,"CAPTCHA challenge failed. Please refresh and try again."),o.disabled=!1,o.textContent="Submit";return}try{const P=await fetch("https://api.globe-eco.com",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"},body:JSON.stringify({name:m,email:l,message:w,emailTo:Q,token:L})}),c=await P.json();P.ok?e.innerHTML='<div class="text-center"><h3 class="text-2xl font-bold text-green-400 mb-2">Thank You!</h3><p class="text-white">Your message has been sent successfully.</p></div>':B(e,c.message||"An unknown server error occurred.")}catch{B(e,"A network error occurred. Please try again.")}finally{e.querySelector('button[type="submit"]')&&(o.disabled=!1,o.textContent="Submit")}}});const be=document.getElementById("mobile-menu-button"),oe=document.getElementById("mobile-menu");be.addEventListener("click",()=>{oe.classList.toggle("hidden")});document.querySelectorAll("#mobile-menu a").forEach(g=>{g.addEventListener("click",()=>{oe.classList.add("hidden")})});document.getElementById("main-header");const xe=document.querySelectorAll(".nav-link"),we=document.querySelectorAll("main section");window.addEventListener("scroll",()=>{let g="";we.forEach(E=>{const O=E.offsetTop;pageYOffset>=O-80&&(g=E.getAttribute("id"))}),xe.forEach(E=>{E.classList.remove("active"),E.getAttribute("href").substring(1)===g&&E.classList.add("active")})});
